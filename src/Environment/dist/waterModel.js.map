{"version":3,"sources":["waterModel.ts"],"names":[],"mappings":";;AACA,0DAAuD;AACvD,+BAAmF;AAEnF;IAKI,oBAAY,GAAa;QAHjB,UAAK,GAAsB,SAAS,CAAC;QAIzC,IAAI,CAAC,GAAG,GAAG,GAAG,CAAC;IACnB,CAAC;IAGD,iCAAY,GAAZ;QACI,IAAI,IAAI,CAAC,KAAK,KAAK,SAAS;YAAE,OAAO;QACrC,aAAa;QACb,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,KAAK,IAAI,GAAG,GAAG,IAAI,CAAC;IAC7D,CAAC;IAGD,+BAAU,GAAV,UAAW,KAAY;QACnB,IAAM,aAAa,GAAG,IAAI,qBAAa,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;QACpD,IAAM,KAAK,GAAG,IAAI,aAAK,CACnB,aAAa,EACb;YACI,YAAY,EAAE,GAAG;YACjB,aAAa,EAAE,GAAG;YAClB,YAAY,EAAE,IAAI,qBAAa,EAAE,CAAC,IAAI,CAAC,wDAAwD,EAAE,UAAU,OAAO;gBAC9G,OAAO,CAAC,KAAK,GAAG,OAAO,CAAC,KAAK,GAAG,sBAAc,CAAC;YACnD,CAAC,CAAC;YACF,KAAK,EAAE,EAAE;YACT,YAAY,EAAC,IAAI,CAAC,GAAG;YACrB,QAAQ,EAAE,QAAQ;YAClB,UAAU,EAAE,QAAQ;YACpB,eAAe,EAAE,GAAG;YACpB,GAAG,EAAE,KAAK,CAAC,GAAG,KAAK,SAAS;SAC/B,CACJ,CAAC;QACF,KAAK,CAAC,QAAQ,CAAC,CAAC,GAAG,CAAC,IAAI,CAAC,EAAE,GAAG,CAAC,CAAC;QAChC,KAAK,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC;QAGjB,YAAY;QACZ,IAAM,aAAa,GAAG,KAAK,CAAC,QAAQ,CAAC,QAAQ,CAAC;QAC9C,OAAO,CAAC,GAAG,CAAC,aAAa,CAAC,CAAA;QAC3B,aAAa,CAAC,IAAI,CAAC,KAAK,GAAG,GAAG,CAAC;QAC9B,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QAEnB,YAAY;QACZ,MAAM,CAAC,KAAK,GAAG,KAAK,CAAC;IACzB,CAAC;IAGL,iBAAC;AAAD,CAlDA,AAkDC,IAAA;AAlDY,gCAAU","file":"waterModel.js","sourcesContent":["import {Renderable} from \"./RendererSettings\";\r\nimport {Water} from \"three/examples/jsm/objects/Water\";\r\nimport {PlaneGeometry, RepeatWrapping, Scene, TextureLoader, Vector3} from \"three\";\r\n\r\nexport class WaterModel implements Renderable {\r\n\r\n    private water: Water | undefined = undefined;\r\n    private  sun;\r\n\r\n    constructor(sun : Vector3) {\r\n        this.sun = sun;\r\n    }\r\n\r\n\r\n    updateRender() {\r\n        if (this.water === undefined) return;\r\n        // @ts-ignore\r\n        this.water.material.uniforms['time'].value += 1.0 / 60.0;\r\n    }\r\n\r\n\r\n    addToScene(scene: Scene) {\r\n        const waterGeometry = new PlaneGeometry(1500, 1500);\r\n        const water = new Water(\r\n            waterGeometry,\r\n            {\r\n                textureWidth: 512,\r\n                textureHeight: 512,\r\n                waterNormals: new TextureLoader().load('https://threejs.org/examples/textures/waternormals.jpg', function (texture) {\r\n                    texture.wrapS = texture.wrapT = RepeatWrapping;\r\n                }),\r\n                alpha: .5,\r\n                sunDirection:this.sun,\r\n                sunColor: 0xffffff,\r\n                waterColor: 0x001e0f,\r\n                distortionScale: 3.7,\r\n                fog: scene.fog !== undefined\r\n            }\r\n        );\r\n        water.rotation.x = -Math.PI / 2;\r\n        scene.add(water);\r\n\r\n\r\n        //@ts-ignore\r\n        const waterUniforms = water.material.uniforms;\r\n        console.log(waterUniforms)\r\n       waterUniforms.size.value = 500;\r\n        this.water = water;\r\n\r\n        //@ts-ignore\r\n        window.water = water;\r\n    }\r\n\r\n\r\n}"]}